---
title: '【学习笔记】LCT'
date: 2020-12-27 17:47:40
tags:
    - LCT
mathjax: true
---

之前学的。以 备 重 修 qwq

把树剖成许多链，每条链用 $splay$ 维护，中序遍历深度递增。

### $access(x)$

* 打通 $x$ 到根的通路。过程是先把 $x$ 转到 $x$ 所在 $splay$ 的根，然后让 $x$ 带着 $x$ 的左子树并到 $fa[x]$ 所在 $splay$ 中充作 $fa[x]$ 右儿子

* 这个过程 $x$ 和 $fa[x]$ 都和它们原本的右儿子断开了，但右儿子依然保留“父亲是谁”的信息）

### $makeroot(x)$

* 先 $access$，此时 $x$ 成了和根在同一 $splay$ 中深度最大、中序遍历最末的点
* 再 $splay$，此时 $x$ 成了所在 $splay$ 的根，但仍是深度最大。为了让 $x$ 成为根、变得深度最小，我们翻转 $x$ 的左右子树。**注意：此操作不影响其他 $splay$ 的深度顺序。**

### $findroot(x)$

* 不断跳左儿子
* ## 珍爱生命，远离 $findroot$。。。$cut()$ 里判能否 $cut$ 的部分还是这样吧：
``` c++
if (ch[y][0] == x && !ch[x][1]) {
    cut;
}
```

## $LCT$ 好像没法同时保证两个节点的子树信息都是对的。。无奈。。
（模拟赛大爆炸