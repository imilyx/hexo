---
title: '【置顶】嘴巴'
date: 2100-00-00 00:00:00
tags:
    - 思维
mathjax: true
---

要锻炼思维就不能每道都写。（然而这并不意味你写就草草写！xml 的赛场调试水平之差有目共睹 qaq...）因 此 开 了 「㗅」坑。

嘴巴题不会放在「学习计划」里。

因为是嘴巴题所以低配，一律 details。

加星号的是打算有时间写写的。

### [$LOJ6669$](https://loj.ac/p/6669) 

<details>
询问 n 次得出每个点深度，同时也得出了重链。按深度 bfs，对于当前点 x，从以根为链顶的重链开始，询问 x 和该重链底的距离，得出 LCA 的深度，若刚好为 dep_x + 1 则父亲找到，否则因为是二叉树，跳到该重链顶点唯一的轻儿子开始新的重链询问。O(nlogn)
</details>

### [$CF741D$](https://www.luogu.com.cn/problem/CF741D)

<details>
「重排」这个条件非常强：所有字符只能有最多一种出现奇数次。奇偶性考虑异或。对于一种 01 路径维护最长的那条。启发式合并每个子树的路径。O(nlogn)
</details>

### $BZOJ4771-$七彩树

<details>
多次询问子树 x 里深度为 [dep_x, dep_x + d] 有多少种不同的颜色。无脑线段树合并复杂度肯定错了嘛。

不考虑深度限制，初始时某颜色 c 的两个点 a、b 各自贡献是 1，到了 lca(a, b) 就要除去 1 个贡献。最后答案是子树和。

考虑深度限制：预处理距离每个 x <= d 的答案。[dep_x, dep_x + d] 在 dfs 序上是连续的。 假设我们已经有 <= d - 1 的答案，那就把深度为 d 的答案加进来，按 dfs 序插在主席树里就好。（好㗅
</details>

### [$AGC051D$](https://atcoder.jp/contests/agc051/tasks/agc051_d)

<details>
巧妙处理。路径的分类标准是什么？我模糊感觉到不同的类别之间应该要有关联。怎么用合适的分类去把 abcd 关联起来呢？

官方题解：分三类。

1. 过 $T$ 型。$S \rightarrow T \rightarrow U$, $U \rightarrow T \rightarrow S$
2. 过 $V$ 型。$S \rightarrow V \rightarrow U$, $U \rightarrow V \rightarrow S$
3. 回型。$S \rightarrow T \rightarrow S$, $S \rightarrow V \rightarrow S$, $U \rightarrow T \rightarrow U$, $U \rightarrow V \rightarrow U$

枚举过 $T$ 型和过 $V$ 型的数量，列出一个好多组合数的柿子，然后变成阶乘再 FFT。。大概就完了，主要是分类比较神。
</details>