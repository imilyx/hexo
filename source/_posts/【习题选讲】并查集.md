---
title: '【习题选讲】并查集'
date: 2018-07-17 14:50:40
tags: 
    - 并查集
mathjax: true
hidden: true
---

### 1. 程序自动分析（NOI2015）
-----

https://vjudge.net/problem/HYSBZ-4195

题意：有 x1, x2, x3, ... 这些变量，给定 n 个形如 $x_i = x_j$  $x_i \neq x_j$ 的约束条件，请判定能否分别为每一个变量赋予恰当的值，使得上述所有约束条件都成立（其实就是不矛盾）。请分别对它们进行判定。 $1 \leq n \leq 10^5$ , $1 \leq x \leq 10^9$ 。

此题是并查集一个很经典的模型，即是否前后矛盾。我们将相等的变量合并在一个集合里，之后对每一个约束条件先检查两个变量是否在一个集合里，不是就合并。要记得离散化 xi。不过话说那一年的NOI有这样的题好水啊！

从这道题中我们看到，并查集能在一张无向图中维护节点之间的连通性，这是它的基本用途之一。实际上，并查集擅长动态维护许多具有传递性的关系，即若 A 与 B 有关系，B 与 C 有关系，则 A 与 C 有关系。

### 2. Supermarket
-----

https://vjudge.net/problem/POJ-1456

题意：给定 N 个商品，每个商品有利润 $p_i$ 和过期时间 $d_i$ ，每天只能卖一个商品，过期商品不能再卖，求如何安排每天卖的商品可以使收益最大。

根据贪心的决策包容性可知，第 i 个商品应当在它过期之前尽量晚卖出。于是我们可以把商品按照利润从大到小排序，并建立一个关于天数的并查集，起初每一天各自构成一个集合。对于每个商品，若它在 d 天之后过期，就在并查集中查询 d 的树根（记为 r ）。若 r 大于 0，则把该商品安排在第 r 天卖出，并合并 r 与 r - 1 （令 r 为 r - 1 的子节点），答案累加该商品的利润。

总之还是很妙的！

### 3. 银河英雄传说
-----

https://www.luogu.org/problemnew/show/P1196#sub

这题好像没什么特殊的，只是“边带权”的并查集吧。

### 4. 食物链
-----

https://vjudge.net/problem/POJ-1182

题意：点击网址查看信息

我们将每个动物 x 拆成三个同类域 $x_{self}$ 、$x_{eat}$ 、$x_{enemy}$ （同类、食物与天敌）。

若一句话说 x 与 y 是同类，则合并 $x_{self}$ 与 $y_{self}$ ，$x_{eat}$ 与 $y_{eat}$ ，$x_{enemy}$ 与 $y_{enemy}$ 。

若一句话说 x 吃 y，则说明 x 和 x 的同类与 y 的天敌是同类，x 和 x 的同类的食物是 y 以及 y 的同类，由于食物链是成环的，y 以及 y 的同类的食物是 x 和 x 的同类的天敌。像上面那样合并一下。

同时在处理每句话之前，我们都要检查这句话的真伪。

有两种信息与 “x 与 y 是同类” 矛盾：

1. x 吃 y
2. y 吃 x

有两种信息与 “x 吃 y” 矛盾：

1. x 和 y 是同类
2. y 吃 x

然后就结束了。