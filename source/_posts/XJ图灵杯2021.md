---
title: 'XJ图灵杯2021'
date: 2021-08-18 23:12:40
tags: 
    - 比赛
mathjax: true
---

[♪───Ｏ（≧∇≦）Ｏ────♪](https://xjoi.net/contest/2929)

## 机器人

差一步，真的 /dk

$|2kx + kd|$，看作 $(x, y)$ 到 $(x + d, y + k)$ 围到 $y$ 轴的面积

最大化面积就是找个凸壳嘛。

## 欧拉回路

我们需要 $O(n^2)$ 实现俩功能：1. 判连通  2. 判欧拉回路

我是觉得啊 1 真的巨大无比恶心！

考虑区间 $[L, R]$。找到 $[L, R - 1]$ 中最左边的 $< R$ 的位置，记为 $i$；找到 $[i, R - 1]$ 中最大值的位置，记为 $j$。

1. $a_j \leq a_R$

    $a[L, i - 1]$ 均 $> a_R$，$[L, i - 1]$ 和 $R$ 无边，$a_R > a[i, R - 1]$，因此 $[L, i - 1]$ 和 $[i, R - 1]$ 无边，$[L, R]$ 合法当且仅当 $[L, i - 1]$ 递减
  
2. $a_j > a_R$

    设 $k$ 为一个 $(j, R]$ 的点。

    1. $a_k > min(a[L, j])$

        $[L, j]$ 和 $k$ 有边

    2. $a_k \leq min(a[L, j])$
    
        $a_k \leq a_i$, $k$ 和 $R$ 有边，$R$ 和 $i$ 有边，$[L, j]$ 和 $k$ 有边！

    所以 $[L, R]$ 的连通性取决于 $[L, j]$ 的连通性。

考虑 2 怎么判。没有靠谱的做法啊！——随机化！每个点 rand 一个权值 $w$，一条边 $(u, v)$ 的权值为 $w_u$ $xor$ $w_v$。

## 划分

每次可以把一个区间乘 $-1$ 或反转，问有多少划分区间的方法可以通过若干操作变成不降序列

考虑一定存在分界点 $i$ 满足 $[1, i] \leq 0$, $[i + 1, n] \geq 0$

开俩 dp 数组，$f[i]$ 表示 $[1, i] \leq 0$ 且不降的方案数，$g[i]$ 表示 $[i, n] \geq 0$ 且不降的方案数

但是统计方案容易算重，当且仅当存在一个数字相同的段，不论取负还是取正都可以

这时候就需要强制将它归入左边！再来一个 dp 数组 $h[i]$ 表示 $[i, n] \geq 0$ 不降且不存在同色长段的方案数

## 正则表达式

Alice 能知道 $s$ 是否在 $r_i$ 这个自动机对应的集合里，需要判断 $s$ + 一个字符 $c$ 得到的串是否在 $r$ 这个自动机里。

设 $r_i$ 对应的串的集合为 $R_i$，$s$ + 一个字符 $c$ 得到的串的集合为 $A_c$，问题转化为需要多少 $R_i$ 才能完整刻画 $A_c$

考虑信息熵，若 $A_c$ 的韦恩图有 $k$ 块，答案就是 $\lceil log_2 k \rceil$

因为 $A_c$ 是由 $R_i$ 交并补得来的，$q$ 个 $R_i$ 最多只能表示 $2^q$ 个 $A_c$

所以就是统计「加子集里的字符得到的串都合法」的子集种类数，再取 $log$。

总结一下，建立正则表达式 $r$ 的 NFA，转 DFA，统计不同的节点后继种类，取 $log$。

关于细节：NFA 是非确定性有限自动机，一条出边可能对应多个点，DFA 是确定性有限自动机，一条出边对应唯一点。NFA 转 DFA 就把出边的点集压缩，以点集为新点。